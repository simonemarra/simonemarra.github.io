<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden">
    <!-- <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: true;"
    >
      <a-text
        value="This content will always face you."
        look-at="[gps-camera]"
        scale="15 15 15"
        gps-entity-place="latitude: 41.929225; longitude: 12.570244;"
        position="0 0 0"
      ></a-text>
      <a-camera
        gps-camera
        rotation-reader
        simulateLatitude="41.9291"
        simulateLongitude="12.5702"
      >
      </a-camera>
    </a-scene> -->
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs='sourceType: webcam; debugUIEnabled: false;'>

          <!-- ~ 400m far -->
          <!-- <a-box material="color: red;" scale="5 5 5" gps-entity-place="latitude: 44.506477; longitude: 11.301524;"></a-box> -->

          <!-- ~ 20m far -->
          <!-- <a-image src="place.png" gps-entity-place="latitude: 44.504417; longitude: 11.301317;"
          ></a-image> -->

          <!-- ~ 0m far -->
          <a-image src="place.png" gps-entity-place="latitude: 44.504348; longitude: 11.301027;"
              ></a-image>

          <!-- using gpsMinDistance: 5 => update GPS only if user moves by 5 meters or more => avoid shaking for near objects -->
          <!-- using accelerationToMove: 1.0 => 'smooth' inertial sensors precision precision in order to avoid distant places shaking -->
          <a-camera
              rotation-reader
              gps-camera="simulateLatitude: 44.50437; simulateLongitude: 11.30106; gpsMinDistance: 10;"
          >
      </a-camera>
    </a-scene>
  </body>

  <script>
    console.log("hello world!");
    setTimeout(() => {
      const distanceMsg = document
        // .querySelector("[gps-entity-place]")
        .querySelector('a-text')
        .getAttribute("distanceMsg");
      console.log(distanceMsg); // "890 meters"
    }, 5000);

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      const gpsText = "Latitude: " + position.coords.latitude +
      "<br>Longitude: " + position.coords.longitude;
      console.log(gpsText);
    }
    getLocation();
  </script>
</html>
